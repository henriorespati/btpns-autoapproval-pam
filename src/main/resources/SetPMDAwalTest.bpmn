<?xml version="1.0" encoding="UTF-8"?>
<bpmn2:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.omg.org/bpmn20" xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:bpsim="http://www.bpsim.org/schemas/1.0" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:drools="http://www.jboss.org/drools" id="_85Z-oCzTEeuu0fU-Dmzr_w" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd http://www.jboss.org/drools drools.xsd http://www.bpsim.org/schemas/1.0 bpsim.xsd http://www.omg.org/spec/DD/20100524/DC DC.xsd http://www.omg.org/spec/DD/20100524/DI DI.xsd " exporter="jBPM Process Modeler" exporterVersion="2.0" targetNamespace="http://www.omg.org/bpmn20">
  <bpmn2:itemDefinition id="_inputItem" structureRef="com.btpnsyariah.autoapproval.input"/>
  <bpmn2:itemDefinition id="_outputItem" structureRef="java.util.HashMap"/>
  <bpmn2:itemDefinition id="_ageItem" structureRef="Integer"/>
  <bpmn2:itemDefinition id="_gcnItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_autoRejectCountItem" structureRef="Integer"/>
  <bpmn2:itemDefinition id="_camelUserItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_camelPasswordItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_camelUrlItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_checkItem" structureRef="Boolean"/>
  <bpmn2:itemDefinition id="_responseItem" structureRef="com.btpnsyariah.autoapproval.response"/>
  <bpmn2:itemDefinition id="_rulesetItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_scoringResultItem" structureRef="com.btpnsyariah.autoapproval.scoringResult"/>
  <bpmn2:itemDefinition id="_scoringResultListItem" structureRef="java.util.ArrayList"/>
  <bpmn2:itemDefinition id="__8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8_namespaceInputXItem" structureRef="java.lang.String"/>
  <bpmn2:itemDefinition id="__8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8_modelInputXItem" structureRef="java.lang.String"/>
  <bpmn2:itemDefinition id="__8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8_decisionInputXItem" structureRef="java.lang.String"/>
  <bpmn2:itemDefinition id="__8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8_businessFlagInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8_BusinessOwnershipOutputXItem" structureRef="Object"/>
  <bpmn2:process id="AutoApproval.SetPMDAwalTest" drools:packageName="org.jbpm" drools:version="1.0" drools:adHoc="false" name="SetPMDAwalTest" isExecutable="true" processType="Public">
    <bpmn2:property id="input" itemSubjectRef="_inputItem" name="input"/>
    <bpmn2:property id="output" itemSubjectRef="_outputItem" name="output"/>
    <bpmn2:property id="age" itemSubjectRef="_ageItem" name="age"/>
    <bpmn2:property id="gcn" itemSubjectRef="_gcnItem" name="gcn"/>
    <bpmn2:property id="autoRejectCount" itemSubjectRef="_autoRejectCountItem" name="autoRejectCount"/>
    <bpmn2:property id="camelUser" itemSubjectRef="_camelUserItem" name="camelUser"/>
    <bpmn2:property id="camelPassword" itemSubjectRef="_camelPasswordItem" name="camelPassword"/>
    <bpmn2:property id="camelUrl" itemSubjectRef="_camelUrlItem" name="camelUrl"/>
    <bpmn2:property id="check" itemSubjectRef="_checkItem" name="check"/>
    <bpmn2:property id="response" itemSubjectRef="_responseItem" name="response"/>
    <bpmn2:property id="ruleset" itemSubjectRef="_rulesetItem" name="ruleset"/>
    <bpmn2:property id="scoringResult" itemSubjectRef="_scoringResultItem" name="scoringResult"/>
    <bpmn2:property id="scoringResultList" itemSubjectRef="_scoringResultListItem" name="scoringResultList"/>
    <bpmn2:sequenceFlow id="_3F8B2FB3-1FA9-4BCD-B6DD-CF1231043F0A" sourceRef="_8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8" targetRef="_A60F3FCB-3114-406E-92C6-6A9BC256A8E2">
      <bpmn2:extensionElements>
        <drools:metaData name="isAutoConnection.target">
          <drools:metaValue><![CDATA[true]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_85Z-oSzTEeuu0fU-Dmzr_w" language="http://www.java.com/java"><![CDATA[return response;]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_9F5DFABF-F8DC-4476-BAFC-94F05EB11836" sourceRef="_309DE2AB-E5EE-454F-BAEE-805C71B9DFD7" targetRef="_8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8">
      <bpmn2:extensionElements>
        <drools:metaData name="isAutoConnection.source">
          <drools:metaValue><![CDATA[true]]></drools:metaValue>
        </drools:metaData>
        <drools:metaData name="isAutoConnection.target">
          <drools:metaValue><![CDATA[true]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
    </bpmn2:sequenceFlow>
    <bpmn2:startEvent id="_309DE2AB-E5EE-454F-BAEE-805C71B9DFD7">
      <bpmn2:outgoing>_9F5DFABF-F8DC-4476-BAFC-94F05EB11836</bpmn2:outgoing>
    </bpmn2:startEvent>
    <bpmn2:endEvent id="_A60F3FCB-3114-406E-92C6-6A9BC256A8E2">
      <bpmn2:incoming>_3F8B2FB3-1FA9-4BCD-B6DD-CF1231043F0A</bpmn2:incoming>
    </bpmn2:endEvent>
    <bpmn2:businessRuleTask id="_8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8" name="Business Ownership" implementation="http://www.jboss.org/drools/dmn">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[Business Ownership]]></drools:metaValue>
        </drools:metaData>
        <drools:onExit-script scriptFormat="http://www.java.com/java">
          <drools:script><![CDATA[String result = (KieFunctions.equalsTo(output.get("autoReject").toString(), "N")) ? "PASS" : "FAILED";
String status = (KieFunctions.equalsTo(output.get("autoReject").toString(), "N")) ? "APPROVED" : "AUTOREJECT";
com.btpnsyariah.autoapproval.scoringResult _scoringResult =
    new com.btpnsyariah.autoapproval.scoringResult(
        "BUSINESS_FLAG", 
        "businessFlag", 
        input.getBusinessFlag(), 
        result, 
        output.get("rejectCode").toString(), 
        output.get("deviationCode").toString()
    );
kcontext.setVariable("scoringResult", _scoringResult);
java.util.List < com.btpnsyariah.autoapproval.scoringResult > _scoringResultList =
    new java.util.ArrayList < com.btpnsyariah.autoapproval.scoringResult > ();
_scoringResultList.add(_scoringResult);
kcontext.setVariable("scoringResultList", _scoringResultList);

com.btpnsyariah.autoapproval.response res = new com.btpnsyariah.autoapproval.response(
    new java.util.Date(),
    "1",
    "1",
    status,
    _scoringResultList
);
kcontext.setVariable("response", res);]]></drools:script>
        </drools:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_9F5DFABF-F8DC-4476-BAFC-94F05EB11836</bpmn2:incoming>
      <bpmn2:outgoing>_3F8B2FB3-1FA9-4BCD-B6DD-CF1231043F0A</bpmn2:outgoing>
      <bpmn2:ioSpecification id="_85Z-oizTEeuu0fU-Dmzr_w">
        <bpmn2:dataInput id="_8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8_namespaceInputX" drools:dtype="java.lang.String" itemSubjectRef="__8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8_namespaceInputXItem" name="namespace"/>
        <bpmn2:dataInput id="_8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8_decisionInputX" drools:dtype="java.lang.String" itemSubjectRef="__8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8_decisionInputXItem" name="decision"/>
        <bpmn2:dataInput id="_8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8_modelInputX" drools:dtype="java.lang.String" itemSubjectRef="__8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8_modelInputXItem" name="model"/>
        <bpmn2:dataInput id="_8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8_businessFlagInputX" drools:dtype="String" itemSubjectRef="__8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8_businessFlagInputXItem" name="businessFlag"/>
        <bpmn2:dataOutput id="_8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8_BusinessOwnershipOutputX" drools:dtype="Object" itemSubjectRef="__8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8_BusinessOwnershipOutputXItem" name="BusinessOwnership"/>
        <bpmn2:inputSet id="_85Z-oyzTEeuu0fU-Dmzr_w">
          <bpmn2:dataInputRefs>_8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8_namespaceInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8_decisionInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8_modelInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8_businessFlagInputX</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="_85Z-pCzTEeuu0fU-Dmzr_w">
          <bpmn2:dataOutputRefs>_8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8_BusinessOwnershipOutputX</bpmn2:dataOutputRefs>
        </bpmn2:outputSet>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="_85Z-pSzTEeuu0fU-Dmzr_w">
        <bpmn2:targetRef>_8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8_namespaceInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_85Z-pizTEeuu0fU-Dmzr_w">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_85Z-pyzTEeuu0fU-Dmzr_w"><![CDATA[https://kiegroup.org/dmn/_D57E7197-E15F-4998-BC3F-241DC9C36799]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_85Z-qCzTEeuu0fU-Dmzr_w">_8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8_namespaceInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_85Z-qSzTEeuu0fU-Dmzr_w">
        <bpmn2:targetRef>_8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8_decisionInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_85Z-qizTEeuu0fU-Dmzr_w">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_85Z-qyzTEeuu0fU-Dmzr_w"><![CDATA[BusinessOwnership]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_85Z-rCzTEeuu0fU-Dmzr_w">_8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8_decisionInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_85Z-rSzTEeuu0fU-Dmzr_w">
        <bpmn2:targetRef>_8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8_modelInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_85Z-rizTEeuu0fU-Dmzr_w">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_85Z-ryzTEeuu0fU-Dmzr_w"><![CDATA[BusinessOwnership]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_85Z-sCzTEeuu0fU-Dmzr_w">_8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8_modelInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_85Z-sSzTEeuu0fU-Dmzr_w">
        <bpmn2:targetRef>_8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8_businessFlagInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_85Z-sizTEeuu0fU-Dmzr_w">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_85Z-syzTEeuu0fU-Dmzr_w"><![CDATA[#{input.businessFlag}]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_85Z-tCzTEeuu0fU-Dmzr_w">_8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8_businessFlagInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataOutputAssociation id="_85Z-tSzTEeuu0fU-Dmzr_w">
        <bpmn2:sourceRef>_8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8_BusinessOwnershipOutputX</bpmn2:sourceRef>
        <bpmn2:targetRef>output</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
    </bpmn2:businessRuleTask>
  </bpmn2:process>
  <bpmndi:BPMNDiagram id="_85Z-tizTEeuu0fU-Dmzr_w">
    <bpmndi:BPMNPlane id="_85Z-tyzTEeuu0fU-Dmzr_w" bpmnElement="AutoApproval.SetPMDAwalTest">
      <bpmndi:BPMNShape id="shape__8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8" bpmnElement="_8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8">
        <dc:Bounds height="102.0" width="154.0" x="160.0" y="190.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__A60F3FCB-3114-406E-92C6-6A9BC256A8E2" bpmnElement="_A60F3FCB-3114-406E-92C6-6A9BC256A8E2">
        <dc:Bounds height="56.0" width="56.0" x="411.0" y="213.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__309DE2AB-E5EE-454F-BAEE-805C71B9DFD7" bpmnElement="_309DE2AB-E5EE-454F-BAEE-805C71B9DFD7">
        <dc:Bounds height="56.0" width="56.0" x="209.0" y="74.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="edge_shape__309DE2AB-E5EE-454F-BAEE-805C71B9DFD7_to_shape__8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8" bpmnElement="_9F5DFABF-F8DC-4476-BAFC-94F05EB11836">
        <di:waypoint xsi:type="dc:Point" x="237.0" y="130.0"/>
        <di:waypoint xsi:type="dc:Point" x="237.0" y="190.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge_shape__8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8_to_shape__A60F3FCB-3114-406E-92C6-6A9BC256A8E2" bpmnElement="_3F8B2FB3-1FA9-4BCD-B6DD-CF1231043F0A">
        <di:waypoint xsi:type="dc:Point" x="237.0" y="241.0"/>
        <di:waypoint xsi:type="dc:Point" x="488.0" y="213.0"/>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
  <bpmn2:relationship id="_85Z-uCzTEeuu0fU-Dmzr_w" type="BPSimData">
    <bpmn2:extensionElements>
      <bpsim:BPSimData>
        <bpsim:Scenario xsi:type="bpsim:Scenario" id="default" name="Simulationscenario">
          <bpsim:ScenarioParameters xsi:type="bpsim:ScenarioParameters"/>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_8092A3F3-3AFA-4E28-8BEA-622BABE3A6F8" id="_85Z-uSzTEeuu0fU-Dmzr_w">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:NormalDistribution mean="0.0" standardDeviation="0.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:ResourceParameters xsi:type="bpsim:ResourceParameters">
              <bpsim:Availability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:Availability>
              <bpsim:Quantity xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:Quantity>
            </bpsim:ResourceParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_309DE2AB-E5EE-454F-BAEE-805C71B9DFD7" id="_85Z-uizTEeuu0fU-Dmzr_w">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:NormalDistribution mean="0.0" standardDeviation="0.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
          </bpsim:ElementParameters>
        </bpsim:Scenario>
      </bpsim:BPSimData>
    </bpmn2:extensionElements>
    <bpmn2:source>_85Z-oCzTEeuu0fU-Dmzr_w</bpmn2:source>
    <bpmn2:target>_85Z-oCzTEeuu0fU-Dmzr_w</bpmn2:target>
  </bpmn2:relationship>
</bpmn2:definitions>
